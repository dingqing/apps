## 微信提醒


### 需求分析
- 背景

    在微信公众号医院预约取号，需要被动刷新多个日期的页面获取是否有号可约。
    
    为提高效率，于是产生该项目。
    
    可经过改造用于其他类似场景。
- 设计思想
    
    抽象：对系统进行抽象，比如，针对本医院应用，“请求页面”过程，抽象为“设置数据源”。所以设计好数据源接口，就可以通用于其他同类场景。
    
    医院场景的相关业务不能写入公共类。

### 详细设计
- 思路：使用脚本定时请求页面，结果符合则进行推送
- 业务背景
    - 分析公众号网页信息可得出，医院会提前一周发布号源，所以每天可以抢到的号日期为从明天开始的连续8天
- 详细设计
    - 请求目标：为尽量抢到早号，又不会造成请求太多，暂定请求前5页
    - 分析结果：页面html中有正常可以点击的亮色“预约”按钮，则把所在行的医生名字和日期加入返回结果
	- 用户关心的数据：如果后期需要优化了网络请求导致结果里的日期混乱，那么最后要把结果将日期早的放在前面
    - 优化：如果已经预约到号，但是想预约更早的，那么需要将预约结果记录下来供程序查询，以便决定是否继续执行数据请求。另外，什么时候程序才最终停止？
- 工具/库
    - 请求页面：selenium（如果需要自动登录）
    - 定时任务：BlockingScheduler
    - 推送：[server酱](http://sc.ftqq.com)（第三方推送服务），或者微信官方模板推送

### 运营
可以分析网络请求返回的结果，得出有用结论，比如有没有特殊时间段会出现空号（别的用户取消的号，不对，医院业务是就诊之前一天才可以进行取消）